:javascript
  $(function() {
    $('a[rel*=facebox]').facebox({        
      loadingImage : '/images/loader.gif',        
      closeImage   : '/images/closelabel.png',
    });
    $( ".draggable" ).draggable({revert: 'invalid'});
    $( ".droppable" ).droppable({
      tolerance: 'fit', 
      hoverClass: 'drophover',
      drop: function(event,ui){
        var $item = ui.draggable;
        var st = $(this).find('input.state').val();
        var id = $(ui.draggable).attr('id');
        $.post('/tasks/state?id=' + id + '&state=' + st);
        $item.remove();
      }
    });
  });
#title
  == Task list: #{@task_list.title.titleize}
%small
  Created on
  %strong
    = l @task_list.created_at, :format => '%A, %d %B of %Y'
  by 
  = @task_list.user.username
.clear
.flash.left{:style => "display:none"}
.task_list_button.right
  = link_to "Back to List", @task_list
.clear
#panel
  #todo.panel.droppable
    = render :partial =>"tasks", :locals => { :tasks => @todo, :state => 1 }
  #progress.panel.droppable
    = render :partial => "tasks", :locals => { :tasks => @progress, :state => 2 }
  #done.panel.droppable
    = render :partial => "tasks", :locals => { :tasks => @merged, :state => 3 }
.clear

